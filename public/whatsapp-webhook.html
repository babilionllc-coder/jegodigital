<!DOCTYPE html>
<html>
<head>
    <title>WhatsApp Webhook</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>WhatsApp Webhook Endpoint</h1>
    <p>This endpoint handles WhatsApp webhook verification.</p>
    
    <script>
        // Handle webhook verification for Meta
        const urlParams = new URLSearchParams(window.location.search);
        const mode = urlParams.get('hub.mode');
        const token = urlParams.get('hub.verify_token');
        const challenge = urlParams.get('hub.challenge');
        
        console.log('Webhook verification:', { mode, token, challenge });
        
        if (mode === 'subscribe' && token === 'jegodigital_webhook_2024_secure_token') {
            console.log('✅ Verification successful!');
            document.body.innerHTML = '<h1>✅ Webhook Verified!</h1><p>Challenge: ' + challenge + '</p>';
            // Send the challenge back to Meta
            window.location.href = window.location.href + '&verified=true';
        } else {
            console.log('❌ Verification failed');
            document.body.innerHTML = '<h1>❌ Verification Failed</h1><p>Mode: ' + mode + '</p><p>Token: ' + token + '</p>';
        }
    </script>
</body>
</html>
